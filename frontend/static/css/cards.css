/**
 * ============================================================================
 * FANTASY WRAPPED - CARD COMPONENTS
 * ============================================================================
 *
 * Collectible card styles with rarity tiers, holographic effects, and
 * 3D flip animations. Designed for the pack opening experience.
 *
 * Card Types:
 * - Player Cards (roster highlights)
 * - Moment Cards (game events)
 * - Superlative Cards (league awards)
 *
 * Rarity Tiers:
 * - Common (gray)
 * - Uncommon (green)
 * - Rare (blue)
 * - Epic (purple)
 * - Legendary (gold + holographic)
 *
 * ============================================================================
 */


/* ===== CARD BASE ===== */

/**
 * Base card container with standard trading card aspect ratio (2.5:3.5)
 * Uses CSS custom properties for easy rarity customization
 */
.card {
    --card-width: 280px;
    --card-height: 392px;
    --card-border-width: 3px;
    --card-border-color: var(--accent-gray);
    --card-glow-color: transparent;
    --card-glow-intensity: 0;

    position: relative;
    width: var(--card-width);
    height: var(--card-height);
    perspective: 1000px;
    cursor: pointer;
}

/* Larger cards for desktop */
@media (min-width: 768px) {
    .card {
        --card-width: 320px;
        --card-height: 448px;
    }
}

/**
 * Card inner container - handles the 3D flip
 */
.card__inner {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: transform 600ms cubic-bezier(0.4, 0, 0.2, 1);
}

.card.flipped .card__inner {
    transform: rotateY(180deg);
}

/* Slight hover lift when not flipping */
.card:not(.flipped):hover .card__inner {
    transform: translateY(-8px) rotateX(5deg);
}


/* ===== CARD FACES ===== */

/**
 * Shared styles for front and back faces
 */
.card__face {
    position: absolute;
    inset: 0;
    backface-visibility: hidden;
    border-radius: var(--radius-xl);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
}

/**
 * Card front - The revealed content
 */
.card__front {
    background: var(--gradient-card);
    border: var(--card-border-width) solid var(--card-border-color);
    transform: rotateY(180deg);
    display: flex;
    flex-direction: column;
}

/**
 * Card back - Generic design shown before flip
 */
.card__back {
    background: linear-gradient(145deg, #1a1a24 0%, #0e0e14 100%);
    border: var(--card-border-width) solid var(--border-default);
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Card back pattern */
.card__back::before {
    content: '';
    position: absolute;
    inset: 12px;
    border: 2px solid var(--border-subtle);
    border-radius: var(--radius-lg);
    background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        rgba(255, 255, 255, 0.02) 10px,
        rgba(255, 255, 255, 0.02) 20px
    );
}

/* Card back logo/icon */
.card__back-logo {
    font-size: 4rem;
    opacity: 0.3;
    z-index: 1;
}


/* ===== CARD GLOW BORDER ===== */

/**
 * Animated glow effect around the card edge
 * Intensity controlled by --card-glow-intensity
 */
.card::before {
    content: '';
    position: absolute;
    inset: calc(var(--card-border-width) * -1);
    border-radius: calc(var(--radius-xl) + var(--card-border-width));
    background: var(--card-glow-color);
    opacity: var(--card-glow-intensity);
    filter: blur(15px);
    z-index: -1;
    transition: opacity var(--duration-normal) var(--ease-out);
}

.card:hover::before {
    opacity: calc(var(--card-glow-intensity) * 1.5);
}


/* ===== RARITY STYLES ===== */

/**
 * Common - Gray, matte, no effects
 */
.card--common {
    --card-border-color: var(--accent-gray);
    --card-glow-color: var(--accent-gray);
    --card-glow-intensity: 0;
}

/**
 * Uncommon - Green with soft glow
 */
.card--uncommon {
    --card-border-color: var(--accent-green);
    --card-glow-color: var(--accent-green);
    --card-glow-intensity: 0.3;
}

/**
 * Rare - Blue with shimmer
 */
.card--rare {
    --card-border-color: var(--accent-blue);
    --card-glow-color: var(--accent-blue);
    --card-glow-intensity: 0.4;
}

/**
 * Epic - Purple with animated gradient border
 */
.card--epic {
    --card-border-color: var(--accent-purple);
    --card-glow-color: var(--accent-purple);
    --card-glow-intensity: 0.5;
}

.card--epic .card__front {
    border-color: transparent;
    background:
        linear-gradient(145deg, #1a1a24, #14141c) padding-box,
        var(--gradient-purple) border-box;
}

/**
 * Legendary - Gold with holographic effect
 */
.card--legendary {
    --card-border-color: var(--accent-gold);
    --card-glow-color: var(--accent-gold);
    --card-glow-intensity: 0.6;
}

.card--legendary .card__front {
    border-color: transparent;
    background:
        linear-gradient(145deg, #1a1a24, #14141c) padding-box,
        var(--gradient-gold) border-box;
}


/* ===== HOLOGRAPHIC EFFECT ===== */

/**
 * Prismatic holographic overlay for legendary cards
 * Uses a moving gradient that responds to card tilt
 */
.card--legendary .card__front::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--gradient-holographic);
    background-size: 400% 400%;
    opacity: 0.1;
    mix-blend-mode: overlay;
    animation: holographic-shift 8s ease-in-out infinite;
    pointer-events: none;
}

@keyframes holographic-shift {
    0%, 100% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
}

/* Enhanced holographic on hover */
.card--legendary:hover .card__front::before {
    opacity: 0.2;
    animation-duration: 3s;
}


/* ===== SHIMMER EFFECT ===== */

/**
 * Light shimmer that sweeps across rare+ cards
 */
.card--rare .card__front::after,
.card--epic .card__front::after,
.card--legendary .card__front::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
        105deg,
        transparent 40%,
        rgba(255, 255, 255, 0.1) 45%,
        rgba(255, 255, 255, 0.2) 50%,
        rgba(255, 255, 255, 0.1) 55%,
        transparent 60%
    );
    transform: translateX(-100%);
    pointer-events: none;
}

.card--rare:hover .card__front::after,
.card--epic:hover .card__front::after,
.card--legendary:hover .card__front::after {
    animation: shimmer 1.5s ease-in-out;
}

@keyframes shimmer {
    100% {
        transform: translateX(100%);
    }
}


/* ===== CARD CONTENT LAYOUT ===== */

/**
 * Player image container at top of card
 */
.card__image-container {
    position: relative;
    height: 55%;
    background: linear-gradient(180deg, #252530 0%, #1a1a24 100%);
    overflow: hidden;
}

.card__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: top center;
}

/* Gradient overlay at bottom of image */
.card__image-container::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(transparent, var(--bg-card));
    pointer-events: none;
}

/**
 * Position badge (QB, RB, WR, etc.)
 */
.card__position {
    position: absolute;
    top: var(--space-3);
    left: var(--space-3);
    padding: var(--space-1) var(--space-3);
    background: rgba(0, 0, 0, 0.7);
    border-radius: var(--radius-sm);
    font-size: var(--text-xs);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/**
 * Rarity badge
 */
.card__rarity {
    position: absolute;
    top: var(--space-3);
    right: var(--space-3);
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-sm);
    font-size: var(--text-xs);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.card--common .card__rarity { background: var(--accent-gray); color: white; }
.card--uncommon .card__rarity { background: var(--accent-green); color: white; }
.card--rare .card__rarity { background: var(--accent-blue); color: white; }
.card--epic .card__rarity { background: var(--accent-purple); color: white; }
.card--legendary .card__rarity { background: var(--gradient-gold); color: var(--text-inverse); }

/**
 * Card info section (below image)
 */
.card__info {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: var(--space-4);
    padding-top: var(--space-2);
}

/**
 * Player/card name
 */
.card__name {
    font-size: var(--text-xl);
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: var(--space-1);
    color: var(--text-primary);
}

/**
 * Card type/subtitle
 */
.card__type {
    font-size: var(--text-sm);
    color: var(--text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: var(--space-3);
}

/**
 * Stats container
 */
.card__stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-2);
    margin-top: auto;
}

.card__stat {
    text-align: center;
    padding: var(--space-2);
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--radius-md);
}

.card__stat-value {
    font-size: var(--text-lg);
    font-weight: 700;
    font-family: var(--font-mono);
    color: var(--text-primary);
}

.card__stat-label {
    font-size: var(--text-xs);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Highlighted stat (primary stat) */
.card__stat--highlight {
    background: rgba(251, 191, 36, 0.1);
    border: 1px solid rgba(251, 191, 36, 0.2);
}

.card__stat--highlight .card__stat-value {
    color: var(--accent-gold);
}

/**
 * Flavor text (roast/praise line)
 */
.card__flavor {
    margin-top: var(--space-3);
    padding-top: var(--space-3);
    border-top: 1px solid var(--border-subtle);
    font-size: var(--text-sm);
    font-style: italic;
    color: var(--text-tertiary);
    text-align: center;
}


/* ===== MOMENT CARD VARIANT ===== */

/**
 * Moment cards show matchup results instead of player images
 */
.card--moment .card__image-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: linear-gradient(180deg, #1a1a24 0%, #14141c 100%);
}

.card--moment .card__week {
    font-size: var(--text-sm);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: var(--space-2);
}

.card--moment .card__matchup {
    display: flex;
    align-items: center;
    gap: var(--space-4);
}

.card--moment .card__team {
    text-align: center;
}

.card--moment .card__score {
    font-size: var(--text-4xl);
    font-weight: 800;
    font-family: var(--font-mono);
    line-height: 1;
}

.card--moment .card__team-name {
    font-size: var(--text-xs);
    color: var(--text-muted);
    margin-top: var(--space-1);
}

.card--moment .card__vs {
    font-size: var(--text-lg);
    color: var(--text-muted);
}

.card--moment .card__outcome {
    margin-top: var(--space-3);
    padding: var(--space-2) var(--space-6);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.card--moment .card__outcome--win {
    background: rgba(34, 197, 94, 0.2);
    color: var(--accent-green);
}

.card--moment .card__outcome--loss {
    background: rgba(239, 68, 68, 0.2);
    color: var(--accent-red);
}


/* ===== SUPERLATIVE CARD VARIANT ===== */

/**
 * Superlative cards are awards with icons
 */
.card--superlative .card__image-container {
    display: flex;
    align-items: center;
    justify-content: center;
    background: radial-gradient(ellipse at center, #252530 0%, #14141c 70%);
}

.card--superlative .card__icon {
    font-size: 6rem;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

/* Roast superlatives get a red tint */
.card--superlative.card--roast .card__image-container {
    background: radial-gradient(ellipse at center, #2a1a1a 0%, #14141c 70%);
}

/* Praise superlatives get a gold tint */
.card--superlative.card--praise .card__image-container {
    background: radial-gradient(ellipse at center, #2a2a1a 0%, #14141c 70%);
}


/* ===== FLIP ANIMATION VARIANTS ===== */

/**
 * Dramatic reveal for legendary cards
 */
.card--legendary.flipping .card__inner {
    animation: legendary-flip 800ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes legendary-flip {
    0% {
        transform: rotateY(0deg) scale(1);
    }
    50% {
        transform: rotateY(90deg) scale(1.1);
    }
    100% {
        transform: rotateY(180deg) scale(1);
    }
}


/* ===== CARD ENTRANCE ANIMATIONS ===== */

/**
 * Card entering the viewport
 */
.card--entering {
    animation: card-enter 500ms var(--ease-spring) forwards;
}

@keyframes card-enter {
    from {
        opacity: 0;
        transform: translateY(40px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/**
 * Staggered card reveals
 */
.card--entering:nth-child(1) { animation-delay: 0ms; }
.card--entering:nth-child(2) { animation-delay: 100ms; }
.card--entering:nth-child(3) { animation-delay: 200ms; }
.card--entering:nth-child(4) { animation-delay: 300ms; }
.card--entering:nth-child(5) { animation-delay: 400ms; }


/* ===== PARTICLE EFFECTS (Epic/Legendary) ===== */

/**
 * Floating particles around epic/legendary cards
 * Uses CSS-only approach with pseudo-elements
 */
.card--epic::after,
.card--legendary::after {
    content: '';
    position: absolute;
    inset: -20px;
    pointer-events: none;
    background-image:
        radial-gradient(2px 2px at 20% 30%, rgba(255, 255, 255, 0.3), transparent),
        radial-gradient(2px 2px at 40% 70%, rgba(255, 255, 255, 0.2), transparent),
        radial-gradient(2px 2px at 50% 20%, rgba(255, 255, 255, 0.3), transparent),
        radial-gradient(2px 2px at 60% 50%, rgba(255, 255, 255, 0.2), transparent),
        radial-gradient(2px 2px at 80% 80%, rgba(255, 255, 255, 0.3), transparent);
    background-size: 100% 100%;
    animation: particles-float 4s ease-in-out infinite;
    opacity: 0;
    transition: opacity var(--duration-normal);
}

.card--epic:hover::after,
.card--legendary:hover::after {
    opacity: 1;
}

@keyframes particles-float {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-10px);
    }
}


/* ===== RESPONSIVE ADJUSTMENTS ===== */

@media (max-width: 480px) {
    .card {
        --card-width: 260px;
        --card-height: 364px;
    }

    .card__name {
        font-size: var(--text-lg);
    }

    .card__stats {
        gap: var(--space-1);
    }

    .card__stat {
        padding: var(--space-1);
    }

    .card__stat-value {
        font-size: var(--text-base);
    }
}
